## 14. 전역 변수의 문제점

### 변수의 생명 주기

- 지역 변수
  - 함수의 생명주기와 동일하다.(함수가 호출시 생성, 종료시 소멸)
- 전역 변수
  - 함수의 호출과 같이 특별한 진입점 없이 코드가 로드되었을 때 바로 실행된다.(애플리케이션 실행시)
  - 전역 변수는 전역 객체의 프로퍼티로서 지정되며, 전역 객체의 생명 주기와 일치하다. (웹 기준 브라우저 종료시까지 계속 존재)

### 전역객체

- 전역 객체는 브라우저 환경에서는 `window`, 서버 환경(Node.js)에서는 `global` 객체를 의미한다. 환경에 따라 전역 객체를 가리키는 다양한 식별자가 존재했으나, ES11에서 `globalThis`로 통일되었다. 즉, 환경에 관계없이 `globalThis`를 통해 전역 객체를 참조할 수 있다.

- `var` 키워드로 선언한 변수는 전역 객체의 프로퍼티가 된다.

### 전역 변수의 문제점

- 암묵적 결합
  - 전역 변수로 선언함으로써, 어디서든 참조와 할당이 가능한 변수를 사용할 수 있는 **암묵적 결합**을 허용하는데, 이러한 전역 변수는 유효 범위가 커 코드의 가독성은 나빠지고 의도치 않은 상태변경으로 인해 위험도가 높아진다.
- 긴 생명주기
  - 생명 주기가 길기 때문에 메모리 리소스도 오랜기간 소비한다.
- 스코프 체인상의 최상위 스코프
  - 변수를 검색할 때, 전역 변수가 가장 마지막에 검색된다. (검색 속도가 느리다.)
- 네임스페이스 오염
  - 파일이 분리되어 있어도 하나의 전역 스코프를 공유하기 때문에, 다른 파일 내에서 동일한 이름으로 선언된 변수 및 함수가 존재할 경우 예상치 못한 결과가 생길 수 있다.
