# 38장 브라우저의 렌더링 과정

## 과정

1. DNS를 통해 서버에 리소스 요청
2. DOM & CSS DOM 생성 후 결합하여 렌더 트리 생성
3. 서버에서 응답된 자바스크립트를 파싱하여 AST를 생성
4. AST를 바이트 코드로 변환하여 실행
   4-2. 이때 DOM API 를 통해 DOM이나 CSS DOM을 변경할 수 있다(변경될 시 다시 렌더 트리로 결합)
5. 렌더 트리를 기반으로 레이아웃을 계산하고 브라우저 화면에 페인팅

<br>

**_HTTP1.1은 리소스 요청이 개별적으로 전송되고 개별적으로 응답받는다. 따라서 리소스의 수에 비례해 응답 시간이 증가했지만 2.0 부터는 동시 전송이 가능하다_**

<br>

**_렌더트리는 화면에 렌더링 되지 않는 노드들은 포함하지 않는다_**

<br>

## 리플로우, 리페인트

### 리플로우

레이아웃을 재계산

> 노드 추가/삭제, 요소의 크기,위치 변경, 위도우 리사이징 등 . . .

### 리페인트

재결합된 렌더 트리를 기반으로 다시 페인트

<br>

자바스크립트 파싱은 병렬이 아닌 직렬로 파싱하기 때문에 script위치를 조정하는 것으로 페이지 로딩 시간을 단축시킬 수 있다 (또 DOM이 완성되지 않은 상태에서 조작하면 발생하는 에러를 방지할 수 있다)

<br>

위에서 말한 DOM 완성 전에 DOM 조작시 발생하는 문제를 근본적으로 해결하기 위해 async와 defer가 추가되었다
<br>
해당 어트리뷰트를 사용하면 HTML파싱과 외부 자바스크립트 파일 로드가 비동기적으로 동시에 진행된다
