# 브라우저 렌더링

> 렌더링 과정
1. HTML, CSS, Javascript, Image, Font 등 리소스를 서버로부터 요청하고 받기
2. HTML과 CSS 파싱하여 DOM과 CSSOM생성 및 결합하여 렌더트리 생성
3. 자바크스립트를 파싱하여 AST생성 및 바이트코드로 변환하여 실행, JS는 DOM API 를 통해 DOM, CSSOM을 변경할 수 있으며, 변경된 DOM과 CSSOM은 다시 렌더트리로 결합
4. 렌더 트리 기반으로 HTML요소의 레이아웃을 계산하고 화면에 페인팅

> HTTP/1.1과 HTTP/2.0의 차이

#### HTML/1.1은 기본적으로 커넥션당 하나의 요청과 응답만 처리하여 리소스 개수에 비례하여 응답시간이 증가한다.

#### HTML/2.0은 다중요청 다중응답이 가능하여, HTML/1.1에 비해 약 50% 빠르다고 알려짐

> 리렌더링(리플로우 및 리페인트)
- 자바스크립트에 의한 노드 추가 또는 삭제
- 브라우저 창의 리사이징에 의한 뷰포트 크기 변경
- HTML요소의 레이아웃에 변경을 발생시키는 width/height, margin, padding, border, display, position, top/right/bottom/left 등의 스타일 변경

>  리플로우와 리페인트

#### 리플로우: 레이아웃 계산을 다시하는 것

#### 리페인트: 재결합된 렌더 트리를 기반으로 다시 페인트 하는 것

`레이아웃에 영향이 없는 변경은 리플로우 없이 리페인트만 일어나기도 한다.`

>자바스크립트 파싱에 의한 HTML 파싱 중단

#### 렌더링 엔진과 자바스크립트 엔진은 병렬적으로 파싱하지 않고 직렬적으로 파싱을 수행한다.
#### 따라서 스크립트의 위치에 따라 파싱이 블로킹되어, DOM 생성이 지연될 수 있다.

> Async / defer

앞서 말한 중단되는 현상을 해결하기 위해 만들어졌다.

src어트리뷰트를 통해 외부 자바스크립트 파일을 로드하는 경우에만 사용할 수있다.

즉, 어트리뷰트가 없는 인라인 자바스크립트에는 사용할 수 없다.

### async

- 파싱 및 JS로드가 비동기적으로 동시에 진행 됌, 단 JS의 실행은 JS로드가 완료된 직후 진행되며 이때 HTML파싱은 중단 됌. 또한 먼저 로드된 JS부터 실행되므로 순서 보장이 안됌

### defer
- 파싱 및 JS로드가 비동기적으로 동시에 진행 됌, JS실행은 HTML파싱이 완료된 직후에 진행 됌