## 24. 클로저

### 클로저란

- 외부 함수보다 중첩 함수가 더 오래 유지되는 경우, 중첩 함수는 생명 주기가 종료한 외부 함수의 변수를 참조할 수 있으며, 이러한 중첩 함수를 **클로저**라 한다.

- 중첩 함수는, 외부 함수의 렉시컬 환경을 기억하고 있기 때문에 (실행 컨텍스트의 외부 환경 참조가 상위의 렉시컬 환경을 참조)

- 외부 함수의 실행 컨텍스트 콜스택에서 제거가 되더라도, 외부 함수의 렉시컬 환경은 중첩 함수에 의해 참조되고 있기 때문에 GC의 대상이 되지 않는다. 때문에 외부 함수에서 선언한 변수에 접근이 가능하다.

- 일반적인 클로저는 중첩함수가 상위 스코프의 식별자를 참조하고 있고 중첩 함수가 외부 함수보다 더 오래 유지되는 경우에만 한정한다.
  - 일반적으로 상위 스코프의 어떤 식별자도 참조하지 않는 경우, 대부분의 모던 브라우저는 최적화를 통해 상위 스코프를 기억하지 않는다.

### 클로저의 활용

- 상태를 안전하게 변경하고 유지하기 위해 사용

- 상태 은닉 및 특정 함수에게만 상태 변경 허용

``` javascript
const increase = (function () {
  
  let num = 0;
  
  return function() {
    return ++num;
  }
})()

increase() // 1
increase() // 2
increase() // 3

```
